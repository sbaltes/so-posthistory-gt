Id;PostId;UserId;PostHistoryTypeId;RevisionGUID;CreationDate;Text;UserDisplayName;Comment
15120215;6903043;703919;2;c9d015a5-f163-48f2-8b1c-86b5a9e617ce;2011-08-01 19:01:21.0;"I'm creating a demo app with the new android [compatibility library][1]. I want to show two listfragments with ViewPager. The first shows the root categories and the second shows the subcategories. After somebody clicks on root category the viewpager move to the subcategory, but it won't work, because always show the root category elements.&#xD;&#xA;I spend few minutes with debug and I'm realised the ViewPager creates the second fragment after the first one.(I think the pager cache the next view or fragment.)&#xD;&#xA;&#xD;&#xA;Is it possible to load the second fragment after onListItemClick?&#xD;&#xA;&#xD;&#xA;Thank your for your help!&#xD;&#xA;&#xD;&#xA;Here is the code:&#xD;&#xA;&#xD;&#xA;    public class ViewPagerDemoActivity extends FragmentActivity implements OnBookSelectedListener {&#xD;&#xA;&#xD;&#xA;	private static int mSelectedCategoryId;&#xD;&#xA;	private MyAdapter mMyAdapter;&#xD;&#xA;	private ViewPager mPager;&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;		super.onCreate(savedInstanceState);&#xD;&#xA;		setContentView(R.layout.main);&#xD;&#xA;		setupPager();&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	private void setupPager() {&#xD;&#xA;		mPager = (ViewPager) findViewById(R.id.pager);&#xD;&#xA;		mMyAdapter = new MyAdapter(getSupportFragmentManager());&#xD;&#xA;		mPager.setAdapter(mMyAdapter);&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onBookSelected(int categoryId) {&#xD;&#xA;		mSelectedCategoryId = categoryId;&#xD;&#xA;		if (mSelectedCategoryId == 0) {&#xD;&#xA;			mPager.setCurrentItem(1);&#xD;&#xA;		} else {&#xD;&#xA;			mPager.setCurrentItem(0);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	public static class MyAdapter extends FragmentPagerAdapter {&#xD;&#xA;		private static final int NUMBER_OF_FRAGMENTS = 2;&#xD;&#xA;&#xD;&#xA;		public MyAdapter(FragmentManager fm) {&#xD;&#xA;			super(fm);&#xD;&#xA;		}&#xD;&#xA;&#xD;&#xA;		@Override&#xD;&#xA;		public Fragment getItem(int position) {&#xD;&#xA;			return BookListFragment.newInstance(mSelectedCategoryId);&#xD;&#xA;		}&#xD;&#xA;&#xD;&#xA;		@Override&#xD;&#xA;		public int getCount() {&#xD;&#xA;			return NUMBER_OF_FRAGMENTS;&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    public class BookListFragment extends ListFragment {&#xD;&#xA;	private static final String ARGUMENT_KEY = ""categoryId"";&#xD;&#xA;	private OnBookSelectedListener mOnBookSelectedListener;&#xD;&#xA;	private int mCategoryId;&#xD;&#xA;&#xD;&#xA;	public static BookListFragment newInstance(int categoryId) {&#xD;&#xA;		BookListFragment bookListFragment = new BookListFragment();&#xD;&#xA;		Bundle argument = new Bundle();&#xD;&#xA;		argument.putInt(ARGUMENT_KEY, categoryId);&#xD;&#xA;		bookListFragment.setArguments(argument);&#xD;&#xA;		return bookListFragment;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;		super.onCreate(savedInstanceState);&#xD;&#xA;		mCategoryId = getArguments() != null ? getArguments().getInt(ARGUMENT_KEY) : 0;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onActivityCreated(Bundle savedInstanceState) {&#xD;&#xA;		super.onActivityCreated(savedInstanceState);&#xD;&#xA;		setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, Books.getBooks(mCategoryId)));&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {&#xD;&#xA;		View v = inflater.inflate(R.layout.pager_list, container, false);&#xD;&#xA;		View tv = v.findViewById(R.id.text);&#xD;&#xA;		((TextView) tv).setText(""Category :"" + mCategoryId);&#xD;&#xA;		return v;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onListItemClick(ListView l, View v, int position, long id) {&#xD;&#xA;		super.onListItemClick(l, v, position, id);&#xD;&#xA;		if (mCategoryId == 0) {&#xD;&#xA;			mOnBookSelectedListener.onBookSelected(1);&#xD;&#xA;		} else {&#xD;&#xA;			mOnBookSelectedListener.onBookSelected(0);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onAttach(Activity activity) {&#xD;&#xA;		super.onAttach(activity);&#xD;&#xA;		try {&#xD;&#xA;			mOnBookSelectedListener = (OnBookSelectedListener) activity;&#xD;&#xA;		} catch (ClassCastException e) {&#xD;&#xA;			throw new ClassCastException(activity.toString() + ""Must Implement OnBookSelectedListener."");&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	public interface OnBookSelectedListener {&#xD;&#xA;		public void onBookSelected(int categoryId);&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;		&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    public class Books {&#xD;&#xA;	private static final String[] fruits = new String[] { ""Apple"", ""Banana"", ""Orange"" };&#xD;&#xA;	private static final String[] category = new String[] { ""Lorem"", ""Dolor"", ""Ipsum"" };&#xD;&#xA;&#xD;&#xA;	public static String[] getBooks(int categoryId) {&#xD;&#xA;		return categoryId == 0 ? category : fruits;&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;  [1]: http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.html";;
17245031;6903043;198315;5;1285e943-ae9b-49ae-8de0-9048c65563b7;2011-10-14 18:39:11.0;"I'm creating a demo app with the new android [compatibility library][1]. I want to show two listfragments with ViewPager. The first shows the root categories and the second shows the subcategories. After somebody clicks on root category the viewpager move to the subcategory, but it won't work, because always show the root category elements.&#xD;&#xA;I spend few minutes with debug and I'm realised the ViewPager creates the second fragment after the first one.(I think the pager cache the next view or fragment.)&#xD;&#xA;&#xD;&#xA;Is it possible to load the second fragment after onListItemClick?&#xD;&#xA;&#xD;&#xA;Here is the code:&#xD;&#xA;&#xD;&#xA;    public class ViewPagerDemoActivity extends FragmentActivity implements OnBookSelectedListener {&#xD;&#xA;&#xD;&#xA;	private static int mSelectedCategoryId;&#xD;&#xA;	private MyAdapter mMyAdapter;&#xD;&#xA;	private ViewPager mPager;&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;		super.onCreate(savedInstanceState);&#xD;&#xA;		setContentView(R.layout.main);&#xD;&#xA;		setupPager();&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	private void setupPager() {&#xD;&#xA;		mPager = (ViewPager) findViewById(R.id.pager);&#xD;&#xA;		mMyAdapter = new MyAdapter(getSupportFragmentManager());&#xD;&#xA;		mPager.setAdapter(mMyAdapter);&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onBookSelected(int categoryId) {&#xD;&#xA;		mSelectedCategoryId = categoryId;&#xD;&#xA;		if (mSelectedCategoryId == 0) {&#xD;&#xA;			mPager.setCurrentItem(1);&#xD;&#xA;		} else {&#xD;&#xA;			mPager.setCurrentItem(0);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	public static class MyAdapter extends FragmentPagerAdapter {&#xD;&#xA;		private static final int NUMBER_OF_FRAGMENTS = 2;&#xD;&#xA;&#xD;&#xA;		public MyAdapter(FragmentManager fm) {&#xD;&#xA;			super(fm);&#xD;&#xA;		}&#xD;&#xA;&#xD;&#xA;		@Override&#xD;&#xA;		public Fragment getItem(int position) {&#xD;&#xA;			return BookListFragment.newInstance(mSelectedCategoryId);&#xD;&#xA;		}&#xD;&#xA;&#xD;&#xA;		@Override&#xD;&#xA;		public int getCount() {&#xD;&#xA;			return NUMBER_OF_FRAGMENTS;&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    public class BookListFragment extends ListFragment {&#xD;&#xA;	private static final String ARGUMENT_KEY = ""categoryId"";&#xD;&#xA;	private OnBookSelectedListener mOnBookSelectedListener;&#xD;&#xA;	private int mCategoryId;&#xD;&#xA;&#xD;&#xA;	public static BookListFragment newInstance(int categoryId) {&#xD;&#xA;		BookListFragment bookListFragment = new BookListFragment();&#xD;&#xA;		Bundle argument = new Bundle();&#xD;&#xA;		argument.putInt(ARGUMENT_KEY, categoryId);&#xD;&#xA;		bookListFragment.setArguments(argument);&#xD;&#xA;		return bookListFragment;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;		super.onCreate(savedInstanceState);&#xD;&#xA;		mCategoryId = getArguments() != null ? getArguments().getInt(ARGUMENT_KEY) : 0;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onActivityCreated(Bundle savedInstanceState) {&#xD;&#xA;		super.onActivityCreated(savedInstanceState);&#xD;&#xA;		setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, Books.getBooks(mCategoryId)));&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {&#xD;&#xA;		View v = inflater.inflate(R.layout.pager_list, container, false);&#xD;&#xA;		View tv = v.findViewById(R.id.text);&#xD;&#xA;		((TextView) tv).setText(""Category :"" + mCategoryId);&#xD;&#xA;		return v;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onListItemClick(ListView l, View v, int position, long id) {&#xD;&#xA;		super.onListItemClick(l, v, position, id);&#xD;&#xA;		if (mCategoryId == 0) {&#xD;&#xA;			mOnBookSelectedListener.onBookSelected(1);&#xD;&#xA;		} else {&#xD;&#xA;			mOnBookSelectedListener.onBookSelected(0);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public void onAttach(Activity activity) {&#xD;&#xA;		super.onAttach(activity);&#xD;&#xA;		try {&#xD;&#xA;			mOnBookSelectedListener = (OnBookSelectedListener) activity;&#xD;&#xA;		} catch (ClassCastException e) {&#xD;&#xA;			throw new ClassCastException(activity.toString() + ""Must Implement OnBookSelectedListener."");&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	public interface OnBookSelectedListener {&#xD;&#xA;		public void onBookSelected(int categoryId);&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;		&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    public class Books {&#xD;&#xA;	private static final String[] fruits = new String[] { ""Apple"", ""Banana"", ""Orange"" };&#xD;&#xA;	private static final String[] category = new String[] { ""Lorem"", ""Dolor"", ""Ipsum"" };&#xD;&#xA;&#xD;&#xA;	public static String[] getBooks(int categoryId) {&#xD;&#xA;		return categoryId == 0 ? category : fruits;&#xD;&#xA;	}&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;  [1]: http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.html";;"deleted 29 characters in body; edited title"
